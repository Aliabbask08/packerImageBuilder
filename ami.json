{
   "variables": {

   "ssh_username": "ubuntu",
   "owners": "285398391915",
   "instance_type": "t2.micro",
   "ami_name": "Testami",
   "Env": "Dev",
   "Name": "MyAsg_image_v1"
},
    "builders": [{
        "type": "amazon-ebs",
        "aws_access_key": "{{env `AWS_ACCESS_KEY_ID`}}",
        "aws_secret_key": "{{env `AWS_SECRET_KEY_ID`}}",
        "region": "{{env `REGION`}}",
        "source_ami_filter": {
            "filters": {
                "virtualization-type": "hvm",
                "name": "ami-ubuntu-16.04-1.10.3-00-1526923973",
                "root-device-type": "ebs"
            },
            "owners": "{{user `owners`}}",
            "most_recent": true
        },
        "instance_type": "{{user `instance_type`}}",
        "ssh_username": "{{user `ssh_username`}}",
        "ami_name": "{{user `ami_name`}}",
        "force_deregister": true,
         "tags": {
               "Name": "{{user `Name`}}",
               "Env": "{{user `Env`}}"
        },
        "run_tags": {
               "Name": "{{user `Name`}}"
       }
    }],
    "_comment": "Welcome to packer world",
    "provisioners": [
    {
        "type": "shell",
        "inline": [
            "sudo apt-get update -y",
            "sudo apt-get install nginx -y",
            "sudo systemctl start nginx",
            "sudo systemctl enable nginx"
      ]
    }
  ]
}
