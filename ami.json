{
    "builders": [{
        "type": "amazon-ebs",
        "profile": "{{user `profile`}}",
        "region": "{{user `region`}}",
        "source_ami_filter": {
            "filters": {
                "virtualization-type": "hvm",
                "name": "{{user `ami_name`}}",
                "root-device-type": "ebs"
            },
            "owners": "{{user `owners`}}",
            "most_recent": true
        },
        "instance_type": "{{user `instance_type`}}",
        "ssh_username": "{{user `ssh_username`}}",
        "ami_name": "{{user `ami_name`}}",
        "force_deregister": true,
        "ami_block_device_mappings": [
         {
            "device_name": "{{user `device_name`}}",
            "snapshot_id": "{{user `snap_id`}}"
         }],
         "tags": {
               "Name": "{{user `Name`}}",
               "Env": "{{user `Env`}}"
        },
        "run_tags": {
               "Name": "{{user `Name`}}"
       }
    }],
    "_comment": "Welcome to packer world",
    "provisioners": [
    {
        "type": "shell",
        "inline": [
            "sudo apt-get update -y"
            "sudo apt-get install nginx -y"
            "sudo systemctl start nginx"
            "sudo systemctl enable nginx"
            "echo 'Hello Packer world' > /var/www/html/index.html"
      ]
    }
  ]
}
