{
   "variables": {

   "region": "ap-south-1",
   "profile": "",
   "ssh_username": "ubuntu",
   "owners": "099720109477",
   "instance_type": "t2.micro",
   "ami_name": "Testami",
   "Env": "Dev",
   "Name": "MyAsg_image_v1"
},
    "builders": [{
        "type": "amazon-ebs",
        "profile": "{{user `profile`}}",
        "region": "{{user `region`}}",
        "source_ami_filter": {
            "filters": {
                "virtualization-type": "hvm",
                "name": "ubuntu-bionic-18.04-amd64-server-20200908",
                "root-device-type": "ebs"
            },
            "owners": "{{user `owners`}}",
            "most_recent": true
        },
        "instance_type": "{{user `instance_type`}}",
        "ssh_username": "{{user `ssh_username`}}",
        "ami_name": "{{user `ami_name`}}",
        "force_deregister": true,
         "tags": {
               "Name": "{{user `Name`}}",
               "Env": "{{user `Env`}}"
        },
        "run_tags": {
               "Name": "{{user `Name`}}"
       }
    }],
    "_comment": "Welcome to packer world",
    "provisioners": [
    {
        "type": "shell",
        "inline": [
            "sudo apt-get update -y",
            "sudo apt-get install nginx -y",
            "sudo systemctl start nginx",
            "sudo systemctl enable nginx",
            "echo 'Hello Packer world' > /var/www/html/index.html"
      ]
    }
  ]
}
